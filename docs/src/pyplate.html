<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.5">
<title>src.pyplate API documentation</title>
<meta name="description" content="This module separates out the constants from pymaker.py.
This file, and the template folder, are the main ways to customize PyPlate.">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source > summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible;min-width:max-content}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin:1em 0}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
/* Collapse source docstrings */
setTimeout(() => {
[...document.querySelectorAll('.hljs.language-python > .hljs-string')]
.filter(el => el.innerHTML.length > 200 && ['"""', "'''"].includes(el.innerHTML.substring(0, 3)))
.forEach(el => {
let d = document.createElement('details');
d.classList.add('hljs-string');
d.innerHTML = '<summary>"""</summary>' + el.innerHTML.substring(3);
el.replaceWith(d);
});
}, 100);
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>src.pyplate</code></h1>
</header>
<section id="section-intro">
<p>This module separates out the constants from pymaker.py.
This file, and the template folder, are the main ways to customize PyPlate.</p>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="src.pyplate.do_after_dist"><code class="name flex">
<span>def <span class="ident">do_after_dist</span></span>(<span>dir_prj, dict_prv, _dict_pub)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def do_after_dist(dir_prj, dict_prv, _dict_pub):
    &#34;&#34;&#34;
    Do any work after making dist

    Args:
        dir_prj: The root of the new project (reserved for
        future use)
        dict_prv: The dictionary containing private pyplate data
        dict_pub: The dictionary containing public project data (reserved for
        future use)

    Do any work on the dist folder after it is created. Currently, this method
    purges any &#34;ABOUT&#34; file used as placeholders for github syncing. It also
    tars the source folder if it is a package, making for one (or two) less
    steps in the user&#39;s install process.
    &#34;&#34;&#34;

    # get dist dir for all operations
    dist = Path(dir_prj) / S_DIR_DIST
    name_fmt = dict_prv[S_KEY_PRV_PRJ][&#34;__PP_DIST_FMT__&#34;]
    p_dist = dist / name_fmt

    # --------------------------------------------------------------------------

    # first purge all dummy files
    for root, _root_dirs, root_files in p_dist.walk():

        # convert files into Paths
        files = [root / f for f in root_files]

        # for each file item
        for item in files:

            # if it is in purge list, delete it
            if item.name in L_PURGE:
                Path.unlink(item)

    # --------------------------------------------------------------------------
    # check for compression in dist

    ext = &#34;.tar.gz&#34;

    # get prj type
    name_small = dict_prv[S_KEY_PRV_PRJ][&#34;__PP_NAME_PRJ_SMALL__&#34;]

    # remove ext from bin file
    old_bin = p_dist / S_DIR_ASSETS / S_DIR_BIN / f&#34;{name_small}.py&#34;
    new_bin = p_dist / S_DIR_ASSETS / S_DIR_BIN / f&#34;{name_small}&#34;
    if old_bin.exists():
        old_bin.rename(new_bin)

    # now do normal dist tar
    in_dir = p_dist
    out_file = Path(S_DIR_DIST) / f&#34;{in_dir}{ext}&#34;

    with tarfile.open(out_file, mode=&#34;w:gz&#34;) as tar:
        tar.add(in_dir, arcname=Path(in_dir).name)

    # chuck the origin dir
    # if not B_DEBUG:
    #     shutil.rmtree(in_dir)</code></pre>
</details>
<div class="desc"><p>Do any work after making dist</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>dir_prj</code></strong></dt>
<dd>The root of the new project (reserved for</dd>
<dt>future use)</dt>
<dt><strong><code>dict_prv</code></strong></dt>
<dd>The dictionary containing private pyplate data</dd>
<dt><strong><code>dict_pub</code></strong></dt>
<dd>The dictionary containing public project data (reserved for</dd>
</dl>
<p>future use)
Do any work on the dist folder after it is created. Currently, this method
purges any "ABOUT" file used as placeholders for github syncing. It also
tars the source folder if it is a package, making for one (or two) less
steps in the user's install process.</p></div>
</dd>
<dt id="src.pyplate.do_after_fix"><code class="name flex">
<span>def <span class="ident">do_after_fix</span></span>(<span>dir_prj, dict_prv, dict_pub)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def do_after_fix(dir_prj, dict_prv, dict_pub):
    &#34;&#34;&#34;
    Do any work after fix

    Args:
        dir_prj: The root of the new project
        dict_prv: The dictionary containing private pyplate data
        dict_pub: The dictionary containing public project data

    Do any work after fix. This method is called at the end of the internal
    _do_after_fix, after all files have been modified.
    &#34;&#34;&#34;

    # get sub-dicts we need
    dict_prv_prj = dict_prv[S_KEY_PRV_PRJ]
    dict_pub_meta = dict_pub[S_KEY_PUB_META]

    # fix top level files
    a_file = dir_prj / D_PRV_ALL[&#34;__PP_README_FILE__&#34;]
    if a_file.exists():
        _fix_readme(a_file, dict_prv_prj, dict_pub_meta)

    a_file = dir_prj / D_PRV_ALL[&#34;__PP_TOML_FILE__&#34;]
    if a_file.exists():
        _fix_pyproject(a_file, dict_prv_prj, dict_pub_meta)

    # fix deep files
    for root, _root_dirs, root_files in dir_prj.walk():

        # get full path to file
        items = [root / f for f in root_files]

        # test each file
        for item in items:

            # fix ui files
            if item.suffix in L_EXT_GTK:
                _fix_ui(item, dict_prv_prj, dict_pub_meta)

            # fix ,desktop files
            if item.suffix in L_EXT_DESKTOP:
                _fix_desktop(item, dict_prv_prj, dict_pub_meta)</code></pre>
</details>
<div class="desc"><p>Do any work after fix</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>dir_prj</code></strong></dt>
<dd>The root of the new project</dd>
<dt><strong><code>dict_prv</code></strong></dt>
<dd>The dictionary containing private pyplate data</dd>
<dt><strong><code>dict_pub</code></strong></dt>
<dd>The dictionary containing public project data</dd>
</dl>
<p>Do any work after fix. This method is called at the end of the internal
_do_after_fix, after all files have been modified.</p></div>
</dd>
<dt id="src.pyplate.do_before_dist"><code class="name flex">
<span>def <span class="ident">do_before_dist</span></span>(<span>_dir_prj, dict_prv, dict_pub)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def do_before_dist(_dir_prj, dict_prv, dict_pub):
    &#34;&#34;&#34;
    Do any work before making dist

    Args:
        dir_prj: The root of the new project (reserved for future use)
        dict_prv: The dictionary containing private pyplate data (reserved for
        future use)
        dict_pub: The dictionary containing public project data (reserved for
        future use)

    Do any work on the dist folder before it is created.
    &#34;&#34;&#34;

    # get small name and version
    name_small = dict_prv[S_KEY_PRV_PRJ][&#34;__PP_NAME_PRJ_SMALL__&#34;]
    version = dict_pub[S_KEY_PUB_META][&#34;__PP_VERSION__&#34;]

    # replace all dots with dashes in ver
    version = version.replace(&#34;.&#34;, &#34;-&#34;)

    # format dist dir name with prj and ver
    name_fmt = f&#34;{name_small}_{version}&#34;
    dict_prv[S_KEY_PRV_PRJ][&#34;__PP_DIST_FMT__&#34;] = name_fmt</code></pre>
</details>
<div class="desc"><p>Do any work before making dist</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>dir_prj</code></strong></dt>
<dd>The root of the new project (reserved for future use)</dd>
<dt><strong><code>dict_prv</code></strong></dt>
<dd>The dictionary containing private pyplate data (reserved for</dd>
<dt>future use)</dt>
<dt><strong><code>dict_pub</code></strong></dt>
<dd>The dictionary containing public project data (reserved for</dd>
</dl>
<p>future use)
Do any work on the dist folder before it is created.</p></div>
</dd>
<dt id="src.pyplate.do_before_fix"><code class="name flex">
<span>def <span class="ident">do_before_fix</span></span>(<span>_dir_prj, dict_prv, _dict_pub)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def do_before_fix(_dir_prj, dict_prv, _dict_pub):
    &#34;&#34;&#34;
    Do any work before fix

    Args:
        dir_prj: The root of the new project (reserved for future use)
        dict_prv: The dictionary containing private pyplate data
        dict_pub: The dictionary containing public project data (reserved for
        future use)

    Do any work before fix. This method is called at the beginning of _do_fix,
    after all dunders have been configured, but before any files have been
    modified.\n
    It is mostly used to make final adjustments to the &#39;D_PRV_PRJ&#39; dunder dict
    before any replacement occurs.
    &#34;&#34;&#34;

    # --------------------------------------------------------------------------
    # these paths are formatted here because they are complex and may be
    # changed by dev

    # get sub-dicts we need
    dict_prv_all = dict_prv[S_KEY_PRV_ALL]
    dict_prv_prj = dict_prv[S_KEY_PRV_PRJ]

    # get values after pymaker has set them
    name_small = dict_prv_prj[&#34;__PP_NAME_PRJ_SMALL__&#34;]

    # paths relative to the end user&#39;s (or dev&#39;s) useful folders
    usr_inst = f&#34;{S_USR_SHARE}/{name_small}&#34;
    dict_prv_prj[&#34;__PP_USR_INST__&#34;] = usr_inst

    # k/v to fix desktop
    dict_prv_prj[&#34;__PP_DESK_ICON__&#34;] = (
        f&#34;{usr_inst}/{S_DIR_SRC}/{S_DIR_GUI}/{S_DIR_DESKTOP}/{name_small}.png&#34;
    )
    name_big = dict_prv_prj[&#34;__PP_NAME_PRJ_BIG__&#34;]
    dict_prv_prj[&#34;__PP_FILE_DESK__&#34;] = (
        f&#34;{S_DIR_SRC}/{S_DIR_GUI}/{S_DIR_DESKTOP}/{name_big}.desktop&#34;
    )

    author = dict_prv_all[&#34;__PP_AUTHOR__&#34;]
    dict_prv_prj[&#34;__PP_APP_ID__&#34;] = S_APP_ID_FMT.format(author, name_small)</code></pre>
</details>
<div class="desc"><p>Do any work before fix</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>dir_prj</code></strong></dt>
<dd>The root of the new project (reserved for future use)</dd>
<dt><strong><code>dict_prv</code></strong></dt>
<dd>The dictionary containing private pyplate data</dd>
<dt><strong><code>dict_pub</code></strong></dt>
<dd>The dictionary containing public project data (reserved for</dd>
</dl>
<p>future use)
Do any work before fix. This method is called at the beginning of _do_fix,
after all dunders have been configured, but before any files have been
modified.</p>
<p>It is mostly used to make final adjustments to the 'D_PRV_PRJ' dunder dict
before any replacement occurs.</p></div>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="src" href="index.html">src</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="src.pyplate.do_after_dist" href="#src.pyplate.do_after_dist">do_after_dist</a></code></li>
<li><code><a title="src.pyplate.do_after_fix" href="#src.pyplate.do_after_fix">do_after_fix</a></code></li>
<li><code><a title="src.pyplate.do_before_dist" href="#src.pyplate.do_before_dist">do_before_dist</a></code></li>
<li><code><a title="src.pyplate.do_before_fix" href="#src.pyplate.do_before_fix">do_before_fix</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.5</a>.</p>
</footer>
</body>
</html>
