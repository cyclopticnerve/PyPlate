<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>pdoc.py - PyPlate</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../../css/brands.min.css" rel="stylesheet">
        <link href="../../../css/solid.min.css" rel="stylesheet">
        <link href="../../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <link href="../../../assets/_mkdocstrings.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">PyPlate</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../../.." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">API</a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Bin</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../bin/pybaker/" class="dropdown-item">pybaker.py</a>
</li>
            
<li>
    <a href="../../bin/pymaker/" class="dropdown-item">pymaker.py</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Conf</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../conf/" class="dropdown-item">conf.py</a>
</li>
            
<li>
    <a href="../mkdocs/" class="dropdown-item">mkdocs.py</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active" aria-current="page">pdoc.py</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Install</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../install/install/" class="dropdown-item">install.py</a>
</li>
            
<li>
    <a href="../../install/uninstall/" class="dropdown-item">uninstall.py</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Src</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../src/pybaker/" class="dropdown-item">pybaker.py</a>
</li>
            
<li>
    <a href="../../src/pymaker/" class="dropdown-item">pymaker.py</a>
</li>
            
<li>
    <a href="../../src/pyplate/" class="dropdown-item">pyplate.py</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../mkdocs/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../../install/install/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#pdocpy" class="nav-link">pdoc.py</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#conf.pdoc" class="nav-link">pdoc</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#conf.pdoc.make_docs" class="nav-link">make_docs</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="pdocpy">pdoc.py</h1>


<div class="doc doc-object doc-module">



<a id="conf.pdoc"></a>
    <div class="doc doc-contents first">

        <p>This module makes documentation for a project using PDoc3. It uses the
project's source files and the config files in the "pdoc3" folder to create
html files in the "docs" folder. It then tweaks the file structure to allow
GitHub Pages to auto-publish your docs at <username>.github.io/<repo_name>. It
also fixes the version number and icon for your docs.
As much code/settings/constants as can be are reused from conf.py.</p>









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="conf.pdoc.make_docs" class="doc doc-heading">
            <code class="highlight language-python">make_docs(dir_prj, dict_prv, _dict_pub, p_dir_pp, p_dir_pp_venv)</code>

</h2>


    <div class="doc doc-contents ">

        <p>Make docs using pdoc3</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dir_prj</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The root of the new project</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dict_prv</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The dictionary containing private pyplate data</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dict_pub</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The dictionary containing public project data</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>p_dir_pp</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to PyPlate program</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>p_dir_pp_env</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to PyPlate's venv (to activate pdoc3)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Fix version number, make the docs, move the docs, and fix the icon paths.</p>


            <details class="quote">
              <summary>Source code in <code>conf/pdoc.py</code></summary>
              <pre class="highlight"><code class="language-python">def make_docs(dir_prj, dict_prv, _dict_pub, p_dir_pp, p_dir_pp_venv):
    """
    Make docs using pdoc3

    Args:
        dir_prj: The root of the new project
        dict_prv: The dictionary containing private pyplate data
        dict_pub: The dictionary containing public project data
        p_dir_pp: Path to PyPlate program
        p_dir_pp_env: Path to PyPlate's venv (to activate pdoc3)

    Fix version number, make the docs, move the docs, and fix the icon paths.
    """

    # --------------------------------------------------------------------------
    # nuke / remake docs dir

    dir_docs_out = dir_prj / conf.S_DIR_DOCS

    # nuke old docs
    if dir_docs_out.exists():

        # delete and recreate docs dir
        shutil.rmtree(dir_docs_out)
        dir_docs_out.mkdir(parents=True)

    # --------------------------------------------------------------------------
    # fix version

    path_mako = dir_prj / S_PATH_MAKO

    # open and read whole file
    with open(path_mako, "r", encoding=conf.S_ENCODING) as a_file:
        text = a_file.read()

    # replace version
    str_pattern = conf.S_RM_VER_SCH
    pp_ver_disp = dict_prv[conf.S_KEY_PRV_PRJ]["__PP_VER_DISP__"]
    str_rep = conf.S_RM_VER_REP.format(pp_ver_disp)
    text = re.sub(str_pattern, str_rep, text, flags=re.S)

    # save file
    with open(path_mako, "w", encoding=conf.S_ENCODING) as a_file:
        a_file.write(text)

    # --------------------------------------------------------------------------
    # make docs

    # get template and output dirs
    dir_docs_tplt = dir_prj / S_DIR_PDOC

    # format cmd using pdoc template dir, output dir, and start dir
    cmd_docs = S_CMD_DOC.format(
        p_dir_pp,
        p_dir_pp_venv,
        dir_prj,
        dir_docs_tplt,
        dir_docs_out,
        dir_prj,
    )

    # the command to run pdoc
    try:
        subprocess.run(
            cmd_docs,
            shell=True,
            check=True,
            stdout=subprocess.DEVNULL,
            stderr=subprocess.STDOUT,
        )
    except Exception as e:
        raise e

    # --------------------------------------------------------------------------
    # fix location

    # find the inner docs folder (named for src dir)
    dir_docs = dir_docs_out / dir_prj.name

    # get all files/dirs in inner dir
    files = list(dir_docs.iterdir())

    # move all files/dirs up one level
    for file in files:
        shutil.move(file, dir_docs_out)

    # delete empty inner dir
    dir_docs.rmdir()

    # --------------------------------------------------------------------------
    # copy image

    # make the inner img dir
    dir_docs_img = dir_docs_out / S_DIR_IMG
    dir_docs_img.mkdir(parents=True)

    # copy image to inner img dir
    img_src = dir_prj / dict_prv[conf.S_KEY_PRV_PRJ]["__PP_IMG_README__"]
    shutil.copy(img_src, dir_docs_img)

    # --------------------------------------------------------------------------
    # fix image

    # where is the image now?
    img_file = Path(S_DIR_IMG) / img_src.name

    # make sure we got a dot ext
    s_html_ext = S_HTML_EXT if S_HTML_EXT.startswith(".") else "." + S_HTML_EXT

    # walk the docs tree
    for root, _dirs, files in dir_docs_out.walk():

        # get full paths and filter for html files
        files = [root / f for f in files]
        files = [f for f in files if f.suffix.lower() == s_html_ext.lower()]

        # for eac html file
        for f in files:

            # get it's rel path to docs folder
            path_rel = f.relative_to(dir_docs_out)

            # calculate number of ups based on depth from docs
            # NB: subtract 1 for no dots if same parent
            level = len(path_rel.parents) - 1

            # build the dots, one set for each level
            dots = ""
            for _i in range(level):
                dots += "../"

            # add the image path rel to prj dir
            dots += str(img_file)

            # format the rep str
            img_rep = S_DOC_IMG_REP.format(dots)

            # open html file for read
            with open(f, "r", encoding=conf.S_ENCODING) as a_file:
                text = a_file.read()

            # replace img src with dots
            text = re.sub(S_DOC_IMG_SCH, img_rep, text, flags=re.S)

            # write text back to file
            with open(f, "w", encoding=conf.S_ENCODING) as a_file:
                a_file.write(text)</code></pre>
            </details>
    </div>

</div>



  </div>

    </div>

</div></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js"></script>
        <script src="../../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
